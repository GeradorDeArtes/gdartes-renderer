<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link href="css/default-style.css" rel="stylesheet">
<link href="css/ilustrabot.css" rel="stylesheet">

<div id="frame">

</div>

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script type="module">

    import {MainRenderer} from "./renderer/MainRenderer.js"

    let template = {
        width: 600,
        height: 600,
        components: [
            {
                id: '1',
                name: 'Camada 1',
                type: 'static-image',
                src: 'url:https://www.atribuna.com.br/image/contentid/policy:1.49502:1556137267/Keanu-Reeves.png?f=2x1&$p$f=684fda8&q=0.8&w=1500&$w=f075b93',
                position: {
                    xAnchor: 'left',
                    yAnchor: 'top',
                    x: 50,
                    y: 50,
                },
                size: {
                    width: '500px',
                    height: '500px',
                },
                fit: 'cover'
            },
            {
                id: '2',
                name: 'Camada 2',
                type: 'static-image',
                src: 'url:https://www.atribuna.com.br/image/contentid/policy:1.49502:1556137267/Keanu-Reeves.png?f=2x1&$p$f=684fda8&q=0.8&w=1500&$w=f075b93',
                position: {
                    x: 20,
                    y: 20,
                },
                size: {
                    width: '150px',
                    height: '150px',
                },
                fit: 'cover'
            },
            {
                id: '3',
  	            name: 'Camada 3',
                type: 'dinamic-text',
                position: {
                    xAnchor: 'left',
                    yAnchor: 'top',
                    x: 170,
                    y: 50,
                },
                size: {
                    width: 200,
                    height: '100px',
                },
                vertical_alignment: 'top|center|bottom',
                horizontal_alignment: 'left|center|right',
                font_family: 'Roboto',
                font_size: '60px',
                weight: 'bold',
                color: '#ffffff',
                letter_spacing: '2px'
            }
        ]
    }

    let state = {
        '3': {
            value: 'Um texto'
        }
    }

    function renderTemplate(template) {
        let frame = $('#frame');
        let renderer = new MainRenderer(frame)
        renderer.render(template, state);
    }
    window.onload = () => {
        renderTemplate(template)
    }

    $(document).on('keypress',function(e) {
        if(e.which == 44) {
            template.components[2].size.width -= 10;
        }
        if(e.which == 46) {
            template.components[2].size.width += 10;
        }
        renderTemplate(template)
    });

</script>