<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link href="css/default-style.css" rel="stylesheet">
<link href="css/ilustrabot.css" rel="stylesheet">

<div style="float: right;">

    <div id="states-list">

    </div>
    
    <div id="components-list">
    
    </div>
    
    <div id="properties">
    
    </div>

</div>

<div id="frame">

</div>

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script type="module">

    import {MainRenderer} from "./renderer/MainRenderer.js"
    import {MiniEditor} from "./renderer/MiniEditor.js"

    let template = {
        width: 600,
        height: 600,
        components: [
            {
                id: '1',
                name: 'Camada 1',
                type: 'static-image',
                src: 'url:https://www.atribuna.com.br/image/contentid/policy:1.49502:1556137267/Keanu-Reeves.png?f=2x1&$p$f=684fda8&q=0.8&w=1500&$w=f075b93',
                position: {
                    xAnchor: 'left',
                    yAnchor: 'top',
                    x: 50,
                    y: 50,
                },
                size: {
                    width: '500px',
                    height: '500px',
                },
                fit: 'cover'
            },
            {
                id: '2',
                name: 'Camada 2',
                type: 'static-image',
                src: 'url:https://www.atribuna.com.br/image/contentid/policy:1.49502:1556137267/Keanu-Reeves.png?f=2x1&$p$f=684fda8&q=0.8&w=1500&$w=f075b93',
                position: {
                    x: 20,
                    y: 20,
                },
                size: {
                    width: '150px',
                    height: '150px',
                },
                fit: 'cover'
            },
            {
                id: '3',
                name: 'Camada 3',
                input: '1',  
                type: 'dinamic-text',
                position: {
                    xAnchor: 'left',
                    yAnchor: 'top',
                    x: 40,
                    y: 460,
                },
                size: {
                    width: 520,
                    height: 100,
                },
                vertical_alignment: 'center',
                horizontal_alignment: 'left',
                font_family: 'Roboto',
                font_size: '40px',
                weight: 'bold',
                color: '#ffffff',
                letter_spacing: 0,
                fill: 'width'
            },
            {
                id: '4',
                name: 'Camada 4',
                input: '1',  
                type: 'dinamic-text',
                position: {
                    xAnchor: 'left',
                    yAnchor: 'top',
                    x: 40,
                    y: 350,
                },
                size: {
                    width: 520,
                    height: 100,
                },
                vertical_alignment: 'center',
                horizontal_alignment: 'left',
                font_family: 'Roboto',
                font_size: '15px',
                weight: 'bold',
                color: '#ffffff',
                letter_spacing: 0
            }
        ]
    }

    let input = {
        '1': {
            "type": "string",
            "description": "Chamada"
        }
    }

    let state = {
        '1': {
            value: 'Um texto feito para quebrasse kkkkkkkkkkkkkkkkkkkkkkkkkkk antessssss dele poder aumentar?'
        }
    }

    let frameElement = $('#frame');
    let renderer = new MainRenderer(frameElement);

    let statesListElement = $('#states-list');
    let componentsListElement = $('#components-list');
    let propertiesElement = $('#properties');
    let miniEditor = new MiniEditor(statesListElement, componentsListElement, propertiesElement);

    window.onload = () => {
        renderer.render(template, input, state);
        miniEditor.init(template, input, state, () => {
            renderer.render(template, input, state);
        });
    }

</script>